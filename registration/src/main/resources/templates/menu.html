<!DOCTYPE html>
<!--
Copyright (C) 2015 Max Planck Institute for Psycholinguistics

This program is free software; you can redistribute it and/or
modify it under the terms of the GNU General Public License
as published by the Free Software Foundation; either version 2
of the License, or (at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program; if not, write to the Free Software
Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
-->
<!--
 * @since Aug 3, 2015 5:19:52 PM (creation date)
 * @author Peter Withers <peter.withers@mpi.nl>
-->
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity3">
    <head>
        <title>FRINEX Administration Menu</title>
        <link type="text/css" rel="stylesheet" href="adminpages.css"/>
        <script src="webjars/jquery/jquery.min.js"></script>
    </head>
    <body>
        <div th:replace="fragments/adminpagelayout :: logout"></div>
        <section>
            <h3>View Data</h3>
            <a th:if="${param.detailed}" th:href="'dataviewer?' + ${(param.detailed != null)? 'detailed' : 'simple'}">Screen Events Viewer</a><br th:if="${param.detailed}"/>
            <a th:href="'participantlisting?' + ${(param.detailed != null)? 'detailed' : 'simple'}">Participant Listing</a><br/>
            <a th:if="${param.detailed}" th:href="'tagviewer?' + ${(param.detailed != null)? 'detailed' : 'simple'}">Experiment Data Viewer</a><br th:if="${param.detailed}"/>
            <a th:href="'tagpairviewer?' + ${(param.detailed != null)? 'detailed' : 'simple'}">Experiment Data Pair Viewer</a> [
            <a th:each="dataChannel : ${T(nl.mpi.tg.eg.frinex.model.ReportTypes.DataChannels).values()}" th:href="'tagpairviewer?' + ${(param.detailed != null)? 'detailed' : 'simple'} + '&amp;dataChannel=' + ${dataChannel.channel}" th:text="${dataChannel.label}">dataChannel</a>
            ]<br/>
            <a th:href="'stimulusresponseviewer?' + ${(param.detailed != null)? 'detailed' : 'simple'}">Stimulus Response Viewer</a> [
            <a th:each="dataChannel : ${T(nl.mpi.tg.eg.frinex.model.ReportTypes.DataChannels).values()}" th:href="'stimulusresponseviewer?' + ${(param.detailed != null)? 'detailed' : 'simple'} + '&amp;dataChannel=' + ${dataChannel.channel}" th:text="${dataChannel.label}">dataChannel</a>
            ]<br/>
            <a th:href="'groupdataviewer?' + ${(param.detailed != null)? 'detailed' : 'simple'}">Group Data Viewer</a><br/>
            <a th:if="${param.detailed}" th:href="'timestampviewer?' + ${(param.detailed != null)? 'detailed' : 'simple'}">Time Stamp Viewer</a><br th:if="${param.detailed}"/>
            <a th:if="${param.detailed}" th:href="'audiolisting?' + ${(param.detailed != null)? 'detailed' : 'simple'}">Audio Listing</a><br th:if="${param.detailed}"/>
        </section>
        <section>
            <h3>Download Data</h3>
            <a th:href="'groupdatacsv?' + ${(param.detailed != null)? 'detailed' : 'simple'}">Group Data CSV</a><br/>
            <a href="aggregate">Download Single CSV</a><br/>
            <a href="zip">Download Zipped Data</a><br/>
        </section>
        <script th:inline="javascript">
            /*<![CDATA[*/
            var detailedView = /*[[${param.detailed != null}]]*/ 'false';
            $.getJSON("artifacts.json", function (data) {
                var items = [];
                $.each(data.artifacts, function (key, val) {
                    var listLabel = key;
                    var showItem = detailedView;
                    if (key === "win64") {
                        listLabel = "Windows 64";
                        showItem = true;
                    }
                    if (key === "mac") {
                        listLabel = "macOS";
                        showItem = true;
                    }
                    if (key === "apk") {
                        listLabel = "Android";
                        showItem = true;
                    }
                    if (showItem) {
                        items.push("<li id=\'" + key + "\'>" + listLabel + "<br/><a href=\'" + val + "\'>" + val + "</a></li><br/>");
                    }
                });
                if (items.length > 0) {
                    var section = $("<section/>");
                    $("<h3>Application Download</h3>").appendTo(section);
                    $("<ul/>", {
                        "class": "downloads",
                        html: items.join("")
                    }).appendTo(section);
                    section.appendTo("body");
                }
            });
            /*]]>*/
        </script>
    </body>
</html>