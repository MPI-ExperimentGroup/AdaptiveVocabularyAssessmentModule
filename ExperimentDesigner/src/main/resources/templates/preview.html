<!DOCTYPE html>
<!--
Copyright (C) 2021 Max Planck Institute for Psycholinguistics, Nijmegen

This program is free software; you can redistribute it and/or
modify it under the terms of the GNU General Public License
as published by the Free Software Foundation; either version 2
of the License, or (at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program; if not, write to the Free Software
Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
-->
<!--
 * @since 08 December 2021 14:45 PM (creation date)
 * @author Peter Withers <peter.withers@mpi.nl>
-->
<html>

<head>
    <title>Wizard Preview</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="./designer.css" />
    <script src="./webjars/jquery/jquery.min.js"></script>
    <style>
        .inspectPanel {
            vertical-align: top;
        }

        .presenterPanel {
            min-height: 100px;
            background: lightblue;
            margin: 10px;
            padding: 10px;
        }
    </style>
</head>

<body>
    <table>
        <tr>
            <td id="inspectPanel" class="inspectPanel"></td>
            <td class="previewPanel">
                <iframe id="previewFrame" src="previewframe" scrolling="no"
                    style="border:1; overflow:hidden; height:95vh; width:80vw;" align="right"></iframe>
            </td>
        </tr>
    </table>
    <script>
        function initTemplateWizard() {
            $.each($("iframe")[0].contentWindow.applicationStates, function (presenterName, presenterTitle) {
                console.log(presenterName, presenterTitle);
                $("#inspectPanel").append("<div class='presenterPanel' id='" + presenterName + "'>" + presenterTitle + "</div>");
            });
        }
        $('#previewFrame').on('load', function () {
            console.log("previewFrame loaded");
            initTemplateWizard();
        });
    </script>
</body>

</html>
