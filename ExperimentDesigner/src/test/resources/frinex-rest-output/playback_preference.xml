<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<experiment appNameDisplay="Playback Preference" appNameInternal="playback_preference" backgroundColour="#FFFFFF" complementColour0="#EAC3A3" complementColour1="#9D7B5E" complementColour2="#C69E7C" complementColour3="#FFEDDE" complementColour4="#FFFDFB" defaultScale="1.0" isScalable="true" preserveLastState="true" primaryColour0="#628D8D" primaryColour1="#385E5E" primaryColour2="#4A7777" primaryColour3="#96ADAD" primaryColour4="#D5D8D8" rotatable="true" showMenuBar="false" textFontSize="17">
    <metadata>
        <field controlledMessage="Voer minimaal drie letters." controlledRegex=".'{'3,'}'" postName="workerId" preventServerDuplicates="false" registrationField="Proefpersoon ID"/>
        <field controlledMessage="Voer een getal." controlledRegex="[0-3][0-9]/[0-1][0-9]/[1-2][0-9][0-9][0-9]" postName="datOfBirth" preventServerDuplicates="false" registrationField="Geboortedatum"/>
        <field controlledMessage="." controlledRegex="|man|vrouw|anders" postName="gender" preventServerDuplicates="false" registrationField="Geslacht"/>
    </metadata>
    <presenter back="Menu" displayOrder="1" menuLabel="Bluetooth Instructions" type="text" self="Bluetooth_Instructions" title="Bluetooth Instructions">
        <htmlText featureText="When the bluetooth controller is connected the virtual keyboard will not show, to enter participant metadata please turn off the bluetooth controller so that the virtual keyboard can be shown. To start the bluetooth controller turn it on and press the button combination M+A."/>
        <targetButton featureText="Volgende" hotKey="ENTER" target="Edit_User"/>
    </presenter>
    <presenter displayOrder="2" menuLabel="Start" type="metadata" self="Start" title="Start">
        <existingUserCheck>
            <multipleUsers>
                <plainText featureText="Begin a new interview with a new participant"/>
                <createUserButton featureText="New interview" target="Edit_User"/>
                <addPadding/>
                <plainText featureText="Resume an interview with an existing participant"/>
                <targetButton featureText="Resume interview" target="SelectUser"/>
            </multipleUsers>
            <singleUser>
                <autoNextPresenter target="Edit_User"/>
            </singleUser>
        </existingUserCheck>
    </presenter>
    <presenter back="Start" displayOrder="3" menuLabel="Select Participant" next="Edit_User" type="metadata" self="SelectUser" title="Select Participant">
        <selectUserMenu/>
    </presenter>
    <presenter displayOrder="4" menuLabel="Menu" type="menu" self="Menu" title="Menu">
        <allMenuItems/>
    </presenter>
    <presenter back="Menu" displayOrder="5" menuLabel="StimuliMenu" type="menu" self="StimuliMenu" title="StimuliMenu">
        <menuItem featureText="PRAY_side" target="PRAY_side"/>
        <!--        <menuItem featureText="Test 2" target="Test_2"/>
        <menuItem featureText="Test 3" target="Test_3"/>
        <menuItem featureText="Test 4" target="Test_4"/>-->
    </presenter>
    <presenter back="SelectUser" displayOrder="6" menuLabel="Terug" next="StimuliMenu" type="metadata" self="Edit_User" title="Gegevens">
        <metadataField fieldName="workerId"/>
        <metadataField fieldName="datOfBirth"/>
        <metadataField fieldName="gender"/>
        <saveMetadataButton featureText="Volgende" sendData="false" networkErrorMessage="Geen verbinding met de server. Controleer alstublieft uw internetverbinding en probeer het opnieuw.">
            <onError/>
            <onSuccess>
                <autoNextPresenter/>
            </onSuccess>
        </saveMetadataButton>
    </presenter>
    <presenter back="StimuliMenu" displayOrder="9" menuLabel="PRAY_side" next="StimuliMenu" type="stimulus" self="PRAY_side" title="PRAY_side">
        <loadStimulus eventTag="PRAY_side" randomise="false" repeatRandomWindow="0" maxStimuli="1000" repeatCount="1">
            <hasMoreStimulus>
                <backgroundImage msToNext="0" src="" styleName=""/>
                <clearPage styleName="fullScreenWidth"/>
                <!--<updateRegion>-->
                <stimulusCodeVideo msToNext="0" maxHeight="100" codeFormat="&lt;code&gt;_L" percentOfPage="0" styleName="borderedVideoFull" showControls="false" maxWidth="100"/>
                <!--<stimulusCodeVideo msToNext="0" maxHeight="100" codeFormat="&lt;code&gt;_R" percentOfPage="0" styleName="borderedVideoRight" showControls="false" maxWidth="100"/>-->               
                <!--</updateRegion>-->
                <touchInputCaptureStart showControls="true"/>
                <touchInputStimulusButton featureText="Left Overlay Button" eventTag="Left" styleName="leftOverlayCurtain" src="curtain_left.png">
                    <disableStimulusButtons/>
                    <playVideo/>
                    <stimulusCodeAudio msToNext="500" codeFormat="Correct" showPlaybackIndicator="false">
                        <enableStimulusButtons/>
                    </stimulusCodeAudio>
                </touchInputStimulusButton>
                <touchInputStimulusButton featureText="Right Overlay Button" eventTag="Right" styleName="rightOverlayCurtain" src="curtain_right.png">
                    <disableStimulusButtons/>
                    <playVideo/>
                    <stimulusCodeAudio msToNext="500" codeFormat="Correct" showPlaybackIndicator="false">
                        <enableStimulusButtons/>
                    </stimulusCodeAudio>
                </touchInputStimulusButton>
                <table styleName="titleBarButton">
                    <!--for now sdcard is not needed if the stimuli are included and the data is retrospectively sent to the server-->
                    
                    <!--hide show title bar-->
                    <!--curtain full screen--> 
                    <!--video full screen, but this should just happen when there is one-->
                    <!--the snapping shut on next or repeat is not an issue, but one possible workaround would be to fade in the curtains-->
                    <!--a re touch should replay the video-->
                    <!--video should loop while curtains are open-->
                    <!--closing the curtians could be faster (x 2)-->
                    <!--record video from the front camera-->
                    <!--loading stimuli from the sdcard, should offer subdirectories and have two ordered stimuli per directory-->
                    <!--there is an error in the curtains where the left works fine but the right snaps and continues to open when the touch ends-->
                    <row>
                        <column>
                            <!--todo: implement this previosu button-->
                            <actionButton featureText="Prev" eventTag="Prev" hotKey="R1_MA_LEFT">
                                <touchInputReportSubmit/>
                                <prevStimulus repeatIncorrect="false"/>
                            </actionButton>
                        </column>
                        <column>
                            <actionButton featureText="Repeat" eventTag="Repeat" hotKey="R1_MA_DOWN">
                                <touchInputReportSubmit/>
                                <showStimulus/>
                            </actionButton>
                        </column>
                        <column>
                            <actionButton featureText="Next" eventTag="Next" hotKey="R1_MA_RIGHT">
                                <touchInputReportSubmit/>
                                <nextStimulus repeatIncorrect="false"/>
                            </actionButton>
                        </column>
                    </row>
                </table>
            </hasMoreStimulus>
            <endOfStimulus>
                <autoNextPresenter/>
            </endOfStimulus>
            <randomGrouping/>
            <stimuli>
                <tag>PRAY_side</tag>
            </stimuli>
        </loadStimulus>
    </presenter>
    <presenter back="Menu" displayOrder="15" menuLabel="Einde van het experiment" type="transmission" self="completion" title="Einde van het experiment">
        <htmlText featureText="Data will not be collected in this version."/>
        <htmlText featureText="Dit is het einde van het experiment.&lt;br/&gt;Hartelijk dank voor uw deelname! &lt;br/&gt;&lt;br/&gt;"/>
        <addPadding/>
        <generateCompletionCode/>
        <addPadding/>
        <htmlText featureText="&lt;br/&gt;Het bovenstaande nummer is het bewijs dat u het experiment heeft voltooid, en is vereist voor het in orde maken van uw vergoeding."/>
        <addPadding/>
        <eraseUsersDataButton featureText="Opnieuw beginnen"/>
    </presenter>
    <presenter back="Menu" displayOrder="17" menuLabel="Over" type="debug" self="about" title="Over">
        <versionData/>
    </presenter>
    <stimuli>
        <stimulus videoPath="COW" code="COW" identifier="COW" pauseMs="0">
            <tag>COW</tag>
        </stimulus>
        <stimulus videoPath="COW mis" code="COW mis" identifier="COW_mis" pauseMs="0">
            <tag>COW</tag>
        </stimulus>
        <stimulus videoPath="COW mis-5" code="COW mis-5" identifier="COW_mis-5" pauseMs="0">
            <tag>COW</tag>
        </stimulus>  
        <stimulus videoPath="FATHER" code="FATHER" identifier="FATHER" pauseMs="0">
            <tag>FATHER</tag>
        </stimulus>
        <stimulus videoPath="FATHER mis" code="FATHER mis" identifier="FATHER_mis" pauseMs="0">
            <tag>FATHER</tag>
        </stimulus>        
        <stimulus videoPath="GHOST-a" code="GHOST-a" identifier="GHOST_a" pauseMs="0">
            <tag>GHOST_a</tag>
        </stimulus>
        <stimulus videoPath="GHOST-a mis" code="GHOST-a mis" identifier="GHOST_a_mis" pauseMs="0">
            <tag>GHOST_a</tag>
        </stimulus>
        <stimulus videoPath="GHOST-b" code="GHOST-b" identifier="GHOST_b" pauseMs="0">
            <tag>GHOST_b</tag>
        </stimulus>
        <stimulus videoPath="GHOST-b mis" code="GHOST-b mis" identifier="GHOST_b_mis" pauseMs="0">
            <tag>GHOST_b</tag>
        </stimulus>
        <stimulus videoPath="PRAY_frontal" code="PRAY_frontal" identifier="PRAY_frontal" pauseMs="0">
            <tag>PRAY_frontal</tag>
        </stimulus>
        <stimulus videoPath="PRAY mis_frontal" code="PRAY mis_frontal" identifier="PRAY_mis_frontal" pauseMs="0">
            <tag>PRAY_frontal</tag>
        </stimulus>
        <stimulus videoPath="PRAY_side" code="PRAY_side" identifier="PRAY_side" pauseMs="0">
            <tag>PRAY_side</tag>
        </stimulus>
        <stimulus videoPath="PRAY mis_side" code="PRAY mis_side" identifier="PRAY_mis_side" pauseMs="0">
            <tag>PRAY_side</tag>
        </stimulus>
        <stimulus videoPath="SHY_frontal" code="SHY_frontal" identifier="SHY_frontal" pauseMs="0">
            <tag>SHY_frontal</tag>
        </stimulus>
        <stimulus videoPath="SHY mis_frontal" code="SHY mis_frontal" identifier="SHY_mis_frontal" pauseMs="0">
            <tag>SHY_frontal</tag>
        </stimulus>

        <stimulus videoPath="SHY_side" code="SHY_side" identifier="SHY_side" pauseMs="0">
            <tag>SHY_side</tag>
        </stimulus>
        <stimulus videoPath="SHY mis_side" code="SHY mis_side" identifier="SHY_mis_side" pauseMs="0">
            <tag>SHY_side</tag>
        </stimulus>
    </stimuli>
</experiment>
